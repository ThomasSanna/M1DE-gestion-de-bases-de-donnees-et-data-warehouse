-- Création des tables
CREATE TABLE BATEAUX (
    BATNUM VARCHAR(5) CONSTRAINT pk_bateaux PRIMARY KEY,
    BATNOM VARCHAR(50),
    BATPORT VARCHAR(50),
    CAPACITE INTEGER
);

CREATE TABLE SKIPPERS (
    SKNUM VARCHAR(5) CONSTRAINT pk_skippers PRIMARY KEY,
    SKNOM VARCHAR(50) NOT NULL,
    SKPORT VARCHAR(50),
    SALAIRE INTEGER,
    CONSTRAINT ck_skippers_salaire CHECK (salaire >= 1200)
);

CREATE TABLE CROISIERES (
    CROISNUM VARCHAR(5) CONSTRAINT pk_croisieres PRIMARY KEY,
    DEPPORT VARCHAR(50) DEFAULT 'AJACCIO',
    ARRPORT VARCHAR(50),
    DEPDATE DATE DEFAULT CURRENT_DATE,
    ARRDATE DATE DEFAULT CURRENT_DATE,
    BATNUM VARCHAR(5),
    SKNUM VARCHAR(5),
    CONSTRAINT fk_croisieres_batnum FOREIGN KEY (batnum) REFERENCES BATEAUX (BATNUM),
    CONSTRAINT fk_croisieres_sknum FOREIGN KEY (sknum) REFERENCES SKIPPERS (SKNUM)
);

-- Insertion de données dans les tables
INSERT INTO SKIPPERS (SKNUM, SKNOM, SKPORT, SALAIRE) VALUES ('1', 'JEAN', 'AJACCIO', 3000);
INSERT INTO SKIPPERS (SKNUM, SKNOM, SKPORT, SALAIRE) VALUES ('2', 'PAUL', 'AJACCIO', 2500);
INSERT INTO SKIPPERS (SKNUM, SKNOM, SKPORT, SALAIRE) VALUES ('3', 'LAURA', 'ANTIBES', 2500);
INSERT INTO SKIPPERS (SKNUM, SKNOM, SKPORT, SALAIRE) VALUES ('4', 'PIERRE', 'AJACCIO', 1500);

INSERT INTO BATEAUX (BATNUM, BATNOM, BATPORT, CAPACITE) VALUES ('B001', 'LIBERTE', 'ANTIBES', 10);
INSERT INTO BATEAUX (BATNUM, BATNOM, BATPORT, CAPACITE) VALUES ('B002', 'LOUISIANE', 'BASTIA', 12);
INSERT INTO BATEAUX (BATNUM, BATNOM, BATPORT, CAPACITE) VALUES ('B003', 'KALISTE', 'BASTIA', 6);
INSERT INTO BATEAUX (BATNUM, BATNOM, BATPORT, CAPACITE) VALUES ('B004', 'INDEPENDANCE', 'CALVI', 6);

INSERT INTO BATEAUX (BATNUM, BATNOM, CAPACITE) VALUES ('B005', 'HARMONIE', 12);

-- Insertion de données dans la table CROISIERES
INSERT INTO CROISIERES (CROISNUM, SKNUM, BATNUM, DEPPORT, ARRPORT, DEPDATE, ARRDATE) 
VALUES ('C001', '1', 'B002', 'BASTIA', 'CALVI', DATE '2024-07-10', DATE '2024-07-11');

INSERT INTO CROISIERES (CROISNUM, DEPPORT, ARRPORT, DEPDATE, ARRDATE, BATNUM, SKNUM) 
VALUES ('C002', 'ANTIBES', 'AJACCIO', DATE '2024-07-15', DATE '2024-07-16', 'B002', '2');

INSERT INTO CROISIERES (CROISNUM, DEPPORT, ARRPORT, DEPDATE, ARRDATE, BATNUM, SKNUM) 
VALUES ('C003', 'AJACCIO', 'BASTIA', DATE '2024-08-21', DATE '2024-08-22', 'B003', '1');

INSERT INTO CROISIERES (CROISNUM, DEPPORT, ARRPORT, DEPDATE, ARRDATE, BATNUM, SKNUM) 
VALUES ('C004', 'CALVI', 'MARSEILLE', DATE '2024-09-02', DATE '2024-09-22', 'B004', '3');

INSERT INTO CROISIERES (CROISNUM, SKNUM, BATNUM, ARRPORT, DEPDATE, ARRDATE) 
VALUES ('C005', '1', 'B002', 'CALVI', DATE '2024-10-10', DATE '2024-10-11');

INSERT INTO CROISIERES (CROISNUM, DEPPORT, ARRPORT, DEPDATE, ARRDATE, BATNUM, SKNUM) 
VALUES ('C007', 'BASTIA', 'MARSEILLE', DATE '2024-08-02', DATE '2024-08-03', 'B002', '3');

INSERT INTO CROISIERES (CROISNUM, DEPPORT, ARRPORT, DEPDATE, ARRDATE, BATNUM, SKNUM) 
VALUES ('C008', 'BASTIA', 'MARSEILLE', DATE '2024-10-02', DATE '2024-10-03', 'B004', '3');

INSERT INTO CROISIERES (CROISNUM, DEPPORT, ARRPORT, DEPDATE, ARRDATE, BATNUM, SKNUM) 
VALUES ('C009', 'AJACCIO', 'MARSEILLE', DATE '2024-08-02', DATE '2024-08-03', 'B001', '3');
